"use strict";var app=angular.module("app",["ngRoute","ngResource","ngCookies","LocalStorageModule","pascalprecht.translate","topMenuService","homeSliderService","commentsService"]);app.config(["$routeProvider","$locationProvider",function(a){a.when("/",{templateUrl:"modules/home/home.html",controller:"homeCtrl",title:"V.S.12 | Home"}).when("/mac",{templateUrl:"modules/product/mac.html",controller:"macCtrl",title:"MacBook"}).when("/login",{templateUrl:"modules/home/login/login.html",controller:"loginCtrl",title:"Login"}).when("/account",{templateUrl:"modules/account/my_account.html",controller:"accountCtrl",title:"My Account"}).when("/new-account",{templateUrl:"modules/account/new_account.html",controller:"newAccountCtrl",title:"New Account"}).otherwise({redirectTo:"/"})}]),app.run(["$location","$rootScope","$translate",function(a,b,c){b.$on("$routeChangeSuccess",function(a,d){b.title=d.$$route.title,c("TITLE."+b.title).then(function(a){b.title=a})})}]),app.filter("encodeURI",function(){return window.encodeURI}),app.config(["$translateProvider",function(a){a.translations("en_US",{PRICE:"Price:","SIGN-IN":"Sign-In","LOG-OUT":"Log out",LOGIN:"Login",PASSWORD:"Password",WELCOME:"Welcome",GUEST:"Guest",SUBMIT:"Submit",COM_NAME:"Your Name",COM_TEXTAREA:"Share your thoughts",COMMENT:"All Comments",COMMENTS:{YES:"All Comments",NO:"No Comments Yet"},REMOVE:"Remove",CREATE:"Create Account",FIRSTNAME:"First Name",LASTNAME:"Last Name",CONFIRMPASSWORD:"Confirm Password",CHECK_DATA:"Please enter a valid login and password",CHAT_MESSAGE:"Message"}),a.translations("uk_UA",{PRICE:"Ціна:","SIGN-IN":"Увійти","LOG-OUT":"Вийти",LOGIN:"Логін",PASSWORD:"Пароль",WELCOME:"Вітаємо",GUEST:"Гостя",TITLE:{"V.S.12 | Home":"V.S.12 | Головна",MacBook:"МакБук",Login:"Вхід","My Account":"Мій Кабінет","Ne wAccount":"Новий Профіль"},SUBMIT:"Відправити",COM_NAME:'Ваше Ім"я',COM_TEXTAREA:"Поділіться своєю думкою",COMMENT:"Всі коментарі",REMOVE:"Видалити",CREATE:"Створити Профіль",FIRSTNAME:'Ім"я',LASTNAME:"Прізвище",CONFIRMPASSWORD:"Повторіть Пароль",CHAT_MESSAGE:"Повідомлення"}),a.translations("de",{PRICE:"Preis:","SIGN-IN":"Mein Konto","LOG-OUT":"Ausloggen",LOGIN:"Einloggen",PASSWORD:"Passwort",WELCOME:"Willkommen",GUEST:"Gast",TITLE:{"V.S.12 | Home":"V.S.12 | Zuhause",MacBook:"MacBook",Login:"Einloggen","My Account":"Mein Konto","New Account":"Neuer Kunde"},SUBMIT:"Einreichen",COM_NAME:"Ihren Namen",COM_TEXTAREA:"Sagen Sie Ihre Meinung",COMMENT:"Alle Kommentare Anzeigen",REMOVE:"Entfernen",CREATE:"Benutzerkonto Erstellen",FIRSTNAME:"Vorname",LASTNAME:"Nachname",CONFIRMPASSWORD:"Passwort bestätigen",CHAT_MESSAGE:"Nachricht"}),a.translations("fr",{PRICE:"Prix:","SIGN-IN":"Connexion","LOG-OUT":"Déconnexion",LOGIN:"S'identifier",PASSWORD:"Mot de passe",WELCOME:"Bienvenue",GUEST:"Invité",TITLE:{"V.S.12 | Home":"V.S.12 | Accueil",MacBook:"МакБук",Login:'S"identifier',"My Account":"Mon Compte","New Account":"Nouveau compte"},SUBMIT:"Soumettre",COM_NAME:"Votre Nom",COM_TEXTAREA:"Partagez votre opinion",COMMENT:"Tous Les Commentaires",REMOVE:"Supprimer",CREATE:"Créer Un Compte",FIRSTNAME:"Prénom",LASTNAME:"Nom",CONFIRMPASSWORD:"Confirmez le mot de passe",CHAT_MESSAGE:"Message"}),a.determinePreferredLanguage(),a.useLocalStorage()}]),app.controller("changeLangCtrl",["$translate","$scope",function(a,b){b.currentLang=a.use(),b.changeLanguage=function(c){a.use(c),b.currentLang=c}}]),app.controller("accountCtrl",["$scope",function(){}]),app.controller("newAccountCtrl",["$scope","$location","localStorageService","$rootScope",function(a,b,c,d){a.firstNameAccount="",a.lastNameAccount="",a.loginAccount="",a.passwordAccount="",a.confirmPasAccount="",a.accountData=[],a.accountCacheData="accountData",null!==c.get(a.accountCacheData)&&(a.accountData=c.get(a.accountCacheData)),a.$watch("accountData",function(){c.add(a.accountCacheData,JSON.stringify(a.accountData))},!0),a.createAccount=function(){a.passwordAccount===a.confirmPasAccount&&(c.remove(a.accountCacheData),a.accountData.unshift({firstName:a.firstNameAccount,lastName:a.lastNameAccount,login:a.loginAccount,password:a.passwordAccount,confirmPas:a.confirmPasAccount}),b.path("/account"),a.firstNameAccount="",a.lastNameAccount="",a.loginAccount="",a.passwordAccount="",a.confirmPasAccount="",d.$emit("accountLogin",a.accountData))}}]),app.controller("homeCtrl",["$scope","$location",function(a,b){a.logOut=function(){b.path="home"}}]),app.controller("loginCtrl",["$scope","$location","$rootScope","localStorageService","$http",function(a,b,c,d){a.credentials={login:"",password:""},a.signInData=[],a.loginData="",a.passwordData="",a.accountSignIn=!1,a.text="Hello World!",a.signInData=d.get("accountData"),a.signIn=function(){var c=0;angular.forEach(a.signInData,function(d,e){c++,a.loginData=a.signInData[e].login,a.passwordData=a.signInData[e].password,a.loginData===a.credentials.login&&a.passwordData===a.credentials.password?(b.path("/account"),a.accountSignIn=!0):a.accountSignIn=!1})},a.createAccount=function(){b.path("/new-account")}}]),app.controller("topBarCtrl",["$scope","MenuHTTP","localStorageService","$rootScope",function(a,b,c,d){a.logoUrl="image/logo.jpg",a.menuName=[],a.accountName="",a.accountFirstName=!1,b.names(function(b){a.menuName=b}),d.$on("accountLogin",function(a,b){c.add("accountName",JSON.stringify(b[0].firstName))}),a.accountName=c.get("accountName"),a.$watch("accountName",function(){return a.accountFirstName=null===c.get("accountName")?!1:!0},!0),a.logOut=function(){c.remove("accountName"),a.accountFirstName=!1}}]),app.directive("topBar",function(){return{restrict:"AE",templateUrl:"modules/home/top_menu/top_menu.html"}}),app.directive("scroll",["$window",function(a){return function(b){angular.element(a).bind("scroll",function(){b.scrollFun=this.pageYOffset>=20?!0:!1,b.$apply()})}}]),angular.module("topMenuService",["ngResource"]).factory("Menu",["$resource",function(a){return a("modules/home/top_menu/:topFile.json",{},{query:{method:"GET",params:{topFile:"top_menu"},isArray:!0,cache:!0}})}]).factory("MenuHTTP",["$http",function(a){function b(b){a({method:"GET",url:"modules/home/top_menu/top_menu.json",cache:!0}).success(b)}return{names:b}}]),app.controller("homeSliderCtrl",["$scope","HomeSlider",function(a,b){a.images=[],b.image(function(b){a.images=b})}]),app.directive("wallopSlider",function(){return{template:'<div class="wallop-slider {{animationClass}}"><ul class="wallop-slider__list"><li class="wallop-slider__item {{itemClasses[$index]}}" ng-repeat="i in images"><img ng-src="{{i.src}}" /><span class="slider-price">{{"PRICE" | translate}} {{i.price | currency}}</span></li></ul><a ng-show="images.length>1" class="wallop-slider__btn wallop-slider__btn--previous btn btn--previous" ng-disabled="prevDisabled" ng-click="onPrevButtonClicked()"><i class="arrow-left"></i></a><a ng-show="images.length>1" class="wallop-slider__btn wallop-slider__btn--next btn btn--next" ng-disabled="nextDisabled" ng-click="onNextButtonClicked()"><i class="arrow-right"></i></a></div>',restrict:"EA",transclude:!0,replace:!1,scope:{images:"=",prices:"=",animation:"@",currentItemIndex:"=",onNext:"&",onPrevious:"&"},controller:["$scope","$timeout",function(a){function b(){return a.currentItemIndex+1===a.images.length}function c(){return!a.currentItemIndex}function d(){a.nextDisabled=b(),a.prevDisabled=c()}function e(){for(var b=0;b<a.images.length;b++)a.itemClasses[b]=""}function f(b){if(b>=a.images.length||0>b||b===a.currentItemIndex)return void(b||(a.itemClasses[0]=g.currentItemClass));e(),a.itemClasses[a.currentItemIndex]=b>a.currentItemIndex?g.hidePreviousClass:g.hideNextClass;var c=b>a.currentItemIndex?g.showNextClass:g.showPreviousClass;a.itemClasses[b]=g.currentItemClass+" "+c,a.currentItemIndex=b,d()}a.itemClasses=[],a.$watch("images",function(a){a.length&&f(0)}),a.animation&&(a.animationClass="wallop-slider--"+a.animation);var g={btnPreviousClass:"wallop-slider__btn--previous",btnNextClass:"wallop-slider__btn--next",itemClass:"wallop-slider__item",currentItemClass:"wallop-slider__item--current",showPreviousClass:"wallop-slider__item--show-previous",showNextClass:"wallop-slider__item--show-next",hidePreviousClass:"wallop-slider__item--hide-previous",hideNextClass:"wallop-slider__item--hide-next"};a.onPrevButtonClicked=function(){f(a.currentItemIndex-1)},a.onNextButtonClicked=function(){f(a.currentItemIndex+1)},a.$watch("currentItemIndex",function(b,c){c>b?"function"==typeof a.onPrevious&&a.onPrevious():"function"==typeof a.onNext&&a.onNext()})}]}}),angular.module("homeSliderService",["ngResource"]).factory("HomeSlider",["$http",function(a){function b(b){a({method:"GET",url:"modules/home_slider/home_slider.json",cache:!0}).success(b)}return{image:b}}]),app.directive("commentsBlock",function(){return{restrict:"E",templateUrl:"modules/comments/comments.html"}}),angular.module("commentsService",["ngResource"]).factory("CommentsData",["$http",function(a){function b(b){a({method:"GET",url:"/comments",cache:!0}).success(b)}return{names:b}}]),app.controller("commentsCtrl",["$scope","$translate","CommentsData",function(a,b,c){var d=io();a.yourName="",a.yourThoughts="",a.commentsData=[],a.commentsCount="",c.names(function(b){a.commentsData=b,a.commentsCount=a.commentsData.length,console.log(a.commentsData)}),a.addComments=function(){a.commentDate=new Date,a.commentsData.unshift({name:a.yourName,thoughts:a.yourThoughts,date:a.commentDate}),a.yourName="",a.yourThoughts="",d.emit("comments",a.commentsData)},d.on("comments",function(b){a.commentsData=b})}]);